(this["webpackJsonpkata-pricing"]=this["webpackJsonpkata-pricing"]||[]).push([[0],{13:function(t,e,c){},15:function(t,e,c){"use strict";c.r(e);c(8);var n=c(1),r=c.n(n),i=c(6),a=c.n(i),s=(c(13),Object(n.createContext)({products:[],basketProducts:[],addBasketProduct:function(){},removeBasketProduct:function(){}})),d=function(){return Object(n.useContext)(s)},o=[{id:1,name:"Face Masks",unitPrice:2.5,priceLabel:"each"},{id:2,name:"Toilet Paper",unitPrice:.65,priceLabel:"per roll"},{id:3,name:"Hand Sanitizer",unitPrice:3.5,priceLabel:"175ml @ \xa319.99 per litre"}],u={1:{label:"Two Face Masks for \xa34",units:2,price:4},2:{label:"Six rolls of toilet paper for the price of five",units:6,price:3.25}},l=new Intl.NumberFormat("en-GB",{currency:"GBP",minimumFractionDigits:2}).format,j=c(0),b=function(){var t=d(),e=t.basketProducts,c=t.removeBasketProduct,n=function(){var t=d().basketProducts,e=t.reduce((function(t,e){return t+e.unitPrice}),0),c=t.reduce((function(t,e){var c=e.id;return t[c]=(t[c]||0)+1,t}),{}),n=Object.entries(c).reduce((function(t,e){var c=Number(e[0]),n=e[1],r=o.find((function(t){return t.id===c})),i=u[c];if(i){if(n<i.units)return t;var a=n%i.units,s=(n-a)/i.units*i.price,d=a*r.unitPrice+s,l=r.unitPrice*n-d;t.push({label:i.label,price:l})}return t}),[]),r=n.reduce((function(t,e){return t+e.price}),0);return{subTotal:e,productSavings:n,totalSavings:r,totalAfterSavings:e-r}}(),r=n.subTotal,i=n.productSavings,a=n.totalSavings,s=n.totalAfterSavings;return Object(j.jsxs)("table",{children:[Object(j.jsxs)("caption",{children:["Basket (",e.length," item",1===e.length?"":"s",")"]}),Object(j.jsxs)("tbody",{children:[e.map((function(t,e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{"data-testid":"basket-item-".concat(t.id),children:t.name}),Object(j.jsxs)("td",{"data-testid":"basket-price-".concat(t.id),children:[l(t.unitPrice),Object(j.jsx)("button",{title:"remove from the basket","data-testid":"remove-product-".concat(e),onClick:function(){return c(t.id)},children:"X"})]})]},"".concat(t.id,"-").concat(e))})),i.length>0&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:2,children:"----------------"})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Sub-total"}),Object(j.jsx)("td",{"data-testid":"sub-total",children:l(r)})]}),Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:2,children:"Savings"})}),i.map((function(t,e){var c=t.label,n=t.price;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{"data-testid":"savings-product-".concat(e),children:c}),Object(j.jsxs)("td",{"data-testid":"savings-price-".concat(e),children:["-",l(n)]})]},c)})),Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:2,children:"----------------"})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Total savings"}),Object(j.jsxs)("td",{"data-testid":"total-savings",children:["-",l(a)]})]})]}),Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:2,children:"----------------"})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Total to pay"}),Object(j.jsx)("td",{"data-testid":"total",children:l(s)})]})]})]})},h=function(){var t=d(),e=t.products,c=t.addBasketProduct;return Object(j.jsxs)("table",{"data-testid":"products-list",children:[Object(j.jsx)("caption",{children:"Products"}),Object(j.jsx)("tbody",{children:e.map((function(t){var e=u[t.id];return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[Object(j.jsx)("strong",{children:t.name}),e&&Object(j.jsx)("div",{children:e.label})]}),Object(j.jsxs)("td",{children:[l(t.unitPrice)," (",t.priceLabel,")",Object(j.jsx)("button",{"data-testid":"add-product-".concat(t.id),onClick:function(){c(t.id)},children:"Add item"})]})]},t.id)}))})]})},O=c(5),p=c(7),x=function(t){var e=t.children,c=Object(n.useState)([]),r=Object(p.a)(c,2),i=r[0],a=r[1],d=Object(n.useCallback)((function(t){a((function(e){return[].concat(Object(O.a)(e),[t]).sort()}))}),[]),u=Object(n.useCallback)((function(t){var e=Object(O.a)(i);e.splice(e.findIndex((function(e){return e===t})),1),a(e)}),[i]),l=i.reduce((function(t,e){var c=o.find((function(t){return t.id===e}));return t.push(c),t}),[]);return Object(j.jsx)(s.Provider,{value:{products:o,basketProducts:l,addBasketProduct:d,removeBasketProduct:u},children:e})};var f=function(){return Object(j.jsxs)(x,{children:[Object(j.jsx)(h,{}),Object(j.jsx)(b,{})]})},v=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,16)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;c(t),n(t),r(t),i(t),a(t)}))};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),v()},8:function(t,e,c){}},[[15,1,2]]]);
//# sourceMappingURL=main.7f4d5098.chunk.js.map